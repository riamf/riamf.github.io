<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		 
			
  
    <meta name="twitter:card" content="summary"/>
    
      <meta name="twitter:image" content="https://riamf.github.io/images/avatar.png" />
    
  
  
  <meta name="twitter:title" content="Metrics and estimates"/>
  <meta name="twitter:description" content="Mean Most basic estimate for location. As simple as possible it is just and average value from a list of values described with equation:
$$ \frac{\sum\limits_{i=1}^n x_i}{n} $$
Trimmed Mean It is a small variation of mean. Fist Values are sorted, then some number of values are dropped from collection beginning and end. After that normal average value is computed. It is Very useful when we want to eliminate the influence of extreme values in data set."/>
  
    <meta name="twitter:site" content="@@riamf1"/>
  
  
  
  
    <meta name="twitter:creator" content="@Pawel Kowalczuk"/>
  



		
		<meta name="author" content="Pawel Kowalczuk">
		<meta name="description" content="Learning Notes">
		<meta name="generator" content="Hugo 0.45.1" />
		<title>Metrics and estimates &middot; Learning Notes</title>
		<link rel="shortcut icon" href="https://riamf.github.io/images/favicon.ico">
		<link rel="stylesheet" href="https://riamf.github.io/css/style.css">
		<link rel="stylesheet" href="https://riamf.github.io/css/highlight.css">

		
		<link rel="stylesheet" href="https://riamf.github.io/css/font-awesome.min.css">
		

		

		
	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='https://riamf.github.io/'> <span class="arrow">←</span>Home</a>
	
	<a href='https://riamf.github.io/posts'>Archive</a>
	<a href='https://riamf.github.io/tags'>Tags</a>
	<a href='https://riamf.github.io/about'>About</a>

	

	
</nav>


        <section id="wrapper" class="post">
            <article>
                <header>
                    <h1>
                        Metrics and estimates
                    </h1>
                    <h2 class="headline">
                    Jul 31, 2018 18:47
                    · 583 words
                    · 3 minute read
                      <span class="tags">
                      
                      
                          
                              <a href="https://riamf.github.io/tags/statistics">statistics</a>
                          
                      
                      
                      </span>
                    </h2>
                </header>
                
                  
                    <div id="toc">
                      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#mean">Mean</a></li>
<li><a href="#trimmed-mean">Trimmed Mean</a></li>
<li><a href="#weighted-mean">Weighted Mean</a></li>
<li><a href="#median">Median</a></li>
<li><a href="#weighted-median">Weighted Median</a></li>
<li><a href="#trimmed-mean-1">Trimmed Mean</a></li>
<li><a href="#outlier">Outlier</a></li>
<li><a href="#robust-estimate">Robust estimate</a></li>
<li><a href="#examples">Examples</a>
<ul>
<li><a href="#mean-1">Mean</a></li>
<li><a href="#trimmed-mean-2">Trimmed Mean</a></li>
<li><a href="#median-1">Median</a></li>
<li><a href="#weighted-mean-1">Weighted Mean</a></li>
<li><a href="#outlier-1">Outlier</a></li>
</ul></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul></li>
</ul>
</nav>
                    </div>
                  
                
                <section id="post-body">
                    

<h2 id="mean">Mean</h2>

<p>Most basic estimate for location.
As simple as possible it is just and average value from a list of values described with equation:</p>

<p>$$ \frac{\sum\limits_{i=1}^n x_i}{n} $$</p>

<h2 id="trimmed-mean">Trimmed Mean</h2>

<p>It is a small variation of mean. Fist Values are sorted, then some number of values are dropped from collection beginning and end. After that normal average value is computed. It is Very useful when we want to eliminate the influence of extreme values in data set.</p>

<h2 id="weighted-mean">Weighted Mean</h2>

<p>It is calculated by multiplying every value by its weight and dividing their sum by the sum of weights. See the formula:</p>

<p>$$ \frac{\sum\limits_{i=1}^n w_ix_i}{\sum w_i} $$</p>

<p>It is very useful when you want to distinct  that some values are more important than others.</p>

<p>When data set has data that represents some different groups and measuring them equally would not reflect real world example.</p>

<h2 id="median">Median</h2>

<p>Basically it is a middle value on a sorted list of values.
If there is an even number of values then median is computed from average of two middle values.</p>

<h2 id="weighted-median">Weighted Median</h2>

<p>It is computed that there is a half weights above and below median value.
First data needs to be sorted then instead of picking middle value we pick such a value that half of the weights are above this value and other half is below.</p>

<h2 id="trimmed-mean-1">Trimmed Mean</h2>

<p>This value is computed by dropping some fixed number of values from the beginning and from the end of sorted data set. Trimmed mean eliminates the influence of extreme values.</p>

<h2 id="outlier">Outlier</h2>

<p>Extreme cases that exist in data set. Outlier for example is every value that is very distant from any other value in data set.</p>

<h2 id="robust-estimate">Robust estimate</h2>

<p>Estimate that is not influenced by outliers. We can call median a robust estimate cause it does not care about outliers in the data set, computing median omits extreme values.</p>

<h2 id="examples">Examples</h2>

<p>To perform examples I will use <a href="http://tomslee.net/airbnb-data-collection-get-the-data">Airbnb publicly available data set</a>. I picked data set that contains rooms available for rent in Warsaw and cost (in US$) per night. This is how the data set looks like:</p>

<table>
<thead>
<tr>
<th>room_id</th>
<th>price</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td>110.0</td>
</tr>

<tr>
<td>2</td>
<td>118.0</td>
</tr>

<tr>
<td>3</td>
<td>72.0</td>
</tr>
</tbody>
</table>

<p>For computation I will use python3 and to load data I want to go with <code>pandas</code> framework cause if is extremely easy to use <code>DataFrame</code> to load and do any data manipulation with it.</p>

<h3 id="mean-1">Mean</h3>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">0</span>    <span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2</span>    data <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;./data/airbnb_warsaw_2017.csv&#39;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">3</span>    n <span style="color:#f92672">=</span> len(data)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">4</span>    mean_price <span style="color:#f92672">=</span> sum(data<span style="color:#f92672">.</span>price)<span style="color:#f92672">/</span>n
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">5</span>    <span style="color:#75715e"># 54.68495536686262</span></code></pre></div>

<h3 id="trimmed-mean-2">Trimmed Mean</h3>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">0</span>    sorted_price <span style="color:#f92672">=</span> sorted(data<span style="color:#f92672">.</span>price)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span>    trim_size <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">0.1</span> <span style="color:#f92672">*</span> len(data))
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2</span>    trimmed_price <span style="color:#f92672">=</span> sorted_price[trim_size:(len(data) <span style="color:#f92672">-</span> trim_size)]
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">3</span>    trimmed_mean <span style="color:#f92672">=</span> sum(trimmed_price)<span style="color:#f92672">/</span>len(trimmed_price)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">4</span>    trimmed_mean
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">5</span>    <span style="color:#75715e"># 45.97714285714286</span></code></pre></div>

<h3 id="median-1">Median</h3>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">0</span>    size <span style="color:#f92672">=</span> len(sorted_price)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span>    <span style="color:#75715e"># 4593</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2</span>    median_index <span style="color:#f92672">=</span> math<span style="color:#f92672">.</span>ceil(size<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">3</span>    sorted_price[median_index]
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">4</span>    <span style="color:#75715e"># 42.0</span></code></pre></div>

<h3 id="weighted-mean-1">Weighted Mean</h3>

<p>This dataset has three types of rooms available, lets create weights mapping for them:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">0</span>    mapping <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;Entire home/apt&#34;</span>: <span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#34;Private room&#34;</span> :<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;Shared room&#34;</span>: <span style="color:#ae81ff">1</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span>    data[<span style="color:#e6db74">&#39;weight&#39;</span>] <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>room_type<span style="color:#f92672">.</span>map(<span style="color:#66d9ef">lambda</span> x: mapping[x])</code></pre></div>

<p>This means that most important for us is type called <code>Entire home/apt</code>.</p>

<p>Now lets calculate weighted mean for price:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">0</span>    weighted_mean <span style="color:#f92672">=</span> sum(data<span style="color:#f92672">.</span>weight <span style="color:#f92672">*</span> data<span style="color:#f92672">.</span>price)<span style="color:#f92672">/</span>sum(data<span style="color:#f92672">.</span>weight)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span>    <span style="color:#75715e"># 57.14528152260111</span></code></pre></div>

<h3 id="outlier-1">Outlier</h3>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">0</span>    sorted_price[size<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span>    <span style="color:#75715e"># 3000</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2</span>    sorted_price[<span style="color:#ae81ff">0</span>]
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">3</span>    <span style="color:#75715e"># 3</span></code></pre></div>

<h2 id="conclusion">Conclusion</h2>

<p>We can clearly see that this values differ but this difference is not a huge one, it always depends on data.
Basic metric for location is mean but as it can be seen in above example it can be sensitive to extreme values.
Other metrics like <code>median</code> or <code>trimmed mean</code> are more robust.</p>

                </section>
            </article>

            
                <a class="twitter" href="https://twitter.com/intent/tweet?text=https%3a%2f%2friamf.github.io%2fposts%2fmetrics_and_estimates%2f - Metrics%20and%20estimates by @%40riamf1"><span class="icon-twitter"> tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

            

            

            

            <footer id="footer">
    
        <div id="social">

	
	
    <a class="symbol" href="https://www.github.com/riamf">
        <i class="fa fa-github-square"></i>
    </a>
    
    <a class="symbol" href="https://www.twitter.com/riamf1">
        <i class="fa fa-twitter-square"></i>
    </a>
    


</div>

    
    <p class="small">
    
       © Copyright 2018 <i class="fa fa-heart" aria-hidden="true"></i> Pawel Kowalczuk
    
    </p>
    <p class="small">
        Powered by <a href="http://www.gohugo.io/">Hugo</a> Theme By <a href="https://github.com/nodejh/hugo-theme-cactus-plus">nodejh</a>
    </p>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</footer>

        </section>

        <script src="https://riamf.github.io/js/jquery-3.3.1.min.js"></script>
<script src="https://riamf.github.io/js/main.js"></script>
<script src="https://riamf.github.io/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>







    </body>
</html>
